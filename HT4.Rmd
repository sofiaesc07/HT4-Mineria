---
title: "HT4 - Arboles de desición"
author: "Stefan Quintana, Sofía Escobar, Wilfredo Gallegos"
date: "3/7/2023"
output: html_document
---

```{r, echo=FALSE}
library("dplyr")

datos <- read.csv("train.csv")
str(datos)
summary(datos)

```
##P2 y P3. Analisis Exploratorio

Las variables siguientes son cuantitativas y discretas, por lo tanto serán tomadas en cuenta en el análisis y modelado:

->MSSubClass
->LotFrontage
->LotArea
->OverallQual
->OverallCond
->YearBuilt
->YearRemodAdd
->MasVnrArea
->BsmtFinSF1
->BsmtFinSF2
->BsmtUnfSF
->TotalBsmtSF
->X1stFlrSF
->X2ndFlrSF
->LowQualFinSF
->GrLivArea
->BsmtFullBath
->BsmtHalfBath
->FullBath
->HalfBath
->BedroomAbvGr
->KitchenAbvGr
->TotRmsAbvGrd
->Fireplaces
->GarageYrBlt
->GarageCars
->GarageArea
->WoodDeckSF
->OpenPorchSF
->EnclosedPorch
->X3SsnPorch
->ScreenPorch
->PoolArea
->MiscVal
->MoSold
->YrSold
->SaleCondition
->SalePrice

No existen variables cuantitativas continuas.

En cuánto al análsis se puede notar en el archivo adjunto con los histogramas de las variables que ninguna variable parece respetar una distribución normal.

Para confirmar lo visto por los histogramas se le hará una prueba de normalidad a cada variable, si cada una presenta un valor-p menor a 0.05 se confirma la conclusión.


###MSSubClass

```{r, echo = FALSE}
library(nortest)
qqnorm(datos$MSSubClass)
qqline(datos$MSSubClass)
lillie.test(datos$MSSubClass)
```

###LotFrontage

```{r, echo = FALSE}
qqnorm(datos$LotFrontage)
qqline(datos$LotFrontage)
lillie.test(datos$LotFrontage)
```


###LotArea

```{r, echo = FALSE}
qqnorm(datos$LotArea)
qqline(datos$LotArea)
lillie.test(datos$LotArea)
```

###OverallQual

```{r, echo = FALSE}
qqnorm(datos$OverallQual)
qqline(datos$OverallQual)
lillie.test(datos$OverallQual)
```

###OverallCond

```{r, echo = FALSE}
qqnorm(datos$OverallCond)
qqline(datos$OverallCond)
lillie.test(datos$OverallCond)
```

###YearBuilt

```{r, echo = FALSE}
qqnorm(datos$YearBuilt)
qqline(datos$YearBuilt)
lillie.test(datos$YearBuilt)
```

###YearRemodAdd

```{r, echo = FALSE}
qqnorm(datos$YearRemodAdd)
qqline(datos$YearRemodAdd)
lillie.test(datos$YearRemodAdd)
```

###MasVnrArea

```{r, echo = FALSE}
qqnorm(datos$MasVnrArea)
qqline(datos$MasVnrArea)
lillie.test(datos$MasVnrArea)
```

###BsmtFinSF1

```{r, echo = FALSE}
qqnorm(datos$BsmtFinSF1)
qqline(datos$BsmtFinSF1)
lillie.test(datos$BsmtFinSF1)
```

###BsmtFinSF2

```{r, echo = FALSE}
qqnorm(datos$BsmtFinSF2)
qqline(datos$BsmtFinSF2)
lillie.test(datos$BsmtFinSF2)
```

###BsmtUnfSF

```{r, echo = FALSE}
qqnorm(datos$BsmtUnfSF)
qqline(datos$BsmtUnfSF)
lillie.test(datos$BsmtUnfSF)
```

###TotalBsmtSF

```{r, echo = FALSE}
qqnorm(datos$TotalBsmtSF)
qqline(datos$TotalBsmtSF)
lillie.test(datos$TotalBsmtSF)
```

###X1stFlrSF

```{r, echo = FALSE}
qqnorm(datos$X1stFlrSF)
qqline(datos$X1stFlrSF)
lillie.test(datos$X1stFlrSF)
```

###X2ndFlrSF

```{r, echo = FALSE}
qqnorm(datos$X2ndFlrSF)
qqline(datos$X2ndFlrSF)
lillie.test(datos$X2ndFlrSF)
```



###GrLivArea

```{r, echo = FALSE}
qqnorm(datos$GrLivArea)
qqline(datos$GrLivArea)
lillie.test(datos$GrLivArea)
```

###BsmtFullBath

```{r, echo = FALSE}
qqnorm(datos$BsmtFullBath)
qqline(datos$BsmtFullBath)
lillie.test(datos$BsmtFullBath)
```

###BsmtHalfBath

```{r, echo = FALSE}
qqnorm(datos$BsmtHalfBath)
qqline(datos$BsmtHalfBath)
lillie.test(datos$BsmtHalfBath)
```

###FullBath

```{r, echo = FALSE}
qqnorm(datos$FullBath)
qqline(datos$FullBath)
lillie.test(datos$FullBath)
```

###HalfBath

```{r, echo = FALSE}
qqnorm(datos$HalfBath)
qqline(datos$HalfBath)
lillie.test(datos$HalfBath)
```

###BedroomAbvGr

```{r, echo = FALSE}
qqnorm(datos$BedroomAbvGr)
qqline(datos$BedroomAbvGr)
lillie.test(datos$BedroomAbvGr)
```

###KitchenAbvGr

```{r, echo = FALSE}
qqnorm(datos$KitchenAbvGr)
qqline(datos$KitchenAbvGr)
lillie.test(datos$KitchenAbvGr)
```

###TotRmsAbvGrd

```{r, echo = FALSE}
qqnorm(datos$TotRmsAbvGrd)
qqline(datos$TotRmsAbvGrd)
lillie.test(datos$TotRmsAbvGrd)
```

###Fireplaces

```{r, echo = FALSE}
qqnorm(datos$Fireplaces)
qqline(datos$Fireplaces)
lillie.test(datos$Fireplaces)
```

###TotRmsAbvGrd

```{r, echo = FALSE}
qqnorm(datos$TotRmsAbvGrd)
qqline(datos$TotRmsAbvGrd)
lillie.test(datos$TotRmsAbvGrd)
```

###GarageYrBlt

```{r, echo = FALSE}
qqnorm(datos$GarageYrBlt)
qqline(datos$GarageYrBlt)
lillie.test(datos$GarageYrBlt)
```

###GarageCars

```{r, echo = FALSE}
qqnorm(datos$GarageCars)
qqline(datos$GarageCars)
lillie.test(datos$GarageCars)
```

###GarageArea

```{r, echo = FALSE}
qqnorm(datos$GarageArea)
qqline(datos$GarageArea)
lillie.test(datos$GarageArea)
```

###WoodDeckSF

```{r, echo = FALSE}
qqnorm(datos$WoodDeckSF)
qqline(datos$WoodDeckSF)
lillie.test(datos$WoodDeckSF)
```

###EnclosedPorch

```{r, echo = FALSE}
qqnorm(datos$EnclosedPorch)
qqline(datos$EnclosedPorch)
lillie.test(datos$EnclosedPorch)
```

###OpenPorchSF

```{r, echo = FALSE}
qqnorm(datos$OpenPorchSF)
qqline(datos$OpenPorchSF)
lillie.test(datos$OpenPorchSF)
```

###X3SsnPorch

```{r, echo = FALSE}
qqnorm(datos$X3SsnPorch)
qqline(datos$X3SsnPorch)
lillie.test(datos$X3SsnPorch)
```

###X3SsnPorch

```{r, echo = FALSE}
qqnorm(datos$X3SsnPorch)
qqline(datos$X3SsnPorch)
lillie.test(datos$X3SsnPorch)
```

###ScreenPorch

```{r, echo = FALSE}
qqnorm(datos$ScreenPorch)
qqline(datos$ScreenPorch)
lillie.test(datos$ScreenPorch)
```

###PoolArea

```{r, echo = FALSE}
qqnorm(datos$PoolArea)
qqline(datos$PoolArea)
lillie.test(datos$PoolArea)
```

###MiscVal

```{r, echo = FALSE}
qqnorm(datos$MiscVal)
qqline(datos$MiscVal)
lillie.test(datos$MiscVal)
```

###MoSold

```{r, echo = FALSE}
qqnorm(datos$MoSold)
qqline(datos$MoSold)
lillie.test(datos$MoSold)
```

###YrSold

```{r, echo = FALSE}
qqnorm(datos$YrSold)
qqline(datos$YrSold)
lillie.test(datos$YrSold)
```

###SalePrice

```{r, echo = FALSE}
qqnorm(datos$SalePrice)
qqline(datos$SalePrice)
lillie.test(datos$SalePrice)
```

Se puede confirmar observando las pruebas de normalidad y las gráficas que las variables no respetan una distribución normal

Se escalan las variables y se saca la matriz de correlaciones para observar a que variables es más sensible el precio de venta.

```{r, echo = FALSE}
datos2 <- dplyr::select_if(datos, is.numeric)
datosc <- scale(datos2)
cor(datosc)
```

Observando las correlaciones se puede notar que las variables OverallQual y GrLivArea son las que tienen una correlación en valor absoluto mayor a 0.7, por lo tanto, deben ser las que se tomaran en cuenta en el modelo.

##Pregunta 4. Particion de los datos en dos conjuntos

Como los datos están balanceados se hizo una partición aleatoria utilizando el 70% de los datos para entrenamiento y el 30% de los datos para prueba.  
```{r}
porcentaje<-0.7
set.seed(123)
corte <- sample(nrow(datosc),nrow(datosc)*porcentaje)
training<-datos[corte,]
test<-datos[-corte,]
```

###Conjunto de entrenamiento (cantidad de muestras: r nrow(train)):  
```{r echo=FALSE}
head(training)
```

###Conjunto de Prueba (cantidad de muestras: `r nrow(test)`):  
```{r}
head(test)
```